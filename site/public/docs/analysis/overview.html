<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Analysis Overview - BSharp C# Parser Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">BSharp C# Parser Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="analysis-framework-overview"><a class="header" href="#analysis-framework-overview">Analysis Framework Overview</a></h1>
<p>The BSharp analysis framework provides a comprehensive suite of tools for analyzing C# code at various levels of detail. It is built on top of the BSharp parser infrastructure and offers insights into code structure, quality, dependencies, and maintainability. These capabilities support standalone analysis tools and editor/CI integrations.</p>
<h2 id="analysis-architecture"><a class="header" href="#analysis-architecture">Analysis Architecture</a></h2>
<p>The analysis framework is organized into specialized modules:</p>
<pre><code>src/bsharp_analysis/src/
├── framework/        # pipeline, passes, registry, session, walker, query
├── passes/           # indexing, metrics, control_flow, dependencies, reporting
├── artifacts/        # symbols, cfg, dependencies
├── metrics/          # AstAnalysis data + shared helpers
├── rules/            # naming, semantic, control_flow_smells
├── report/           # AnalysisReport assembly
└── (no quality module)
</code></pre>
<h2 id="analysis-capabilities"><a class="header" href="#analysis-capabilities">Analysis Capabilities</a></h2>
<h3 id="control-flow-analysis"><a class="header" href="#control-flow-analysis">Control Flow Analysis</a></h3>
<ul>
<li><strong>Path Analysis</strong>: Identify all possible execution paths through methods</li>
<li><strong>Reachability</strong>: Detect unreachable code sections</li>
<li><strong>Complexity Metrics</strong>: Calculate cyclomatic complexity and other flow-based metrics</li>
<li><strong>Dead Code Detection</strong>: Find code that can never be executed</li>
</ul>
<h3 id="dependency-analysis"><a class="header" href="#dependency-analysis">Dependency Analysis</a></h3>
<ul>
<li><strong>Type Dependencies</strong>: Track relationships between types</li>
<li><strong>Assembly Dependencies</strong>: Analyze external assembly usage</li>
<li><strong>Circular Dependencies</strong>: Detect problematic dependency cycles</li>
<li><strong>Coupling Metrics</strong>: Measure afferent and efferent coupling</li>
</ul>
<h3 id="code-metrics"><a class="header" href="#code-metrics">Code Metrics</a></h3>
<p>Comprehensive metrics collection across multiple dimensions:</p>
<h4 id="complexity-metrics"><a class="header" href="#complexity-metrics">Complexity Metrics</a></h4>
<ul>
<li>Cyclomatic Complexity</li>
<li>Cognitive Complexity</li>
<li>Nesting Depth</li>
<li>Method Length</li>
</ul>
<h4 id="size-metrics"><a class="header" href="#size-metrics">Size Metrics</a></h4>
<ul>
<li>Lines of Code (LOC)</li>
<li>Source Lines of Code (SLOC)</li>
<li>Comment Lines</li>
<li>Method Count per Class</li>
</ul>
<h4 id="maintainability-metrics"><a class="header" href="#maintainability-metrics">Maintainability Metrics</a></h4>
<ul>
<li>Maintainability Index</li>
<li>Technical Debt Indicators</li>
<li>Code Duplication Detection</li>
<li>Halstead Metrics</li>
</ul>
<h3 id="rules"><a class="header" href="#rules">Rules</a></h3>
<ul>
<li><strong>Naming Rules</strong>: Basic naming convention checks</li>
<li><strong>Control Flow Smells</strong>: Simple flow-related smells (e.g., deep nesting warnings)</li>
</ul>
<h3 id="type-analysis"><a class="header" href="#type-analysis">Type Analysis</a></h3>
<ul>
<li><strong>Type Usage</strong>: Track how types are used throughout the codebase</li>
<li><strong>Generic Analysis</strong>: Analyze generic type usage patterns</li>
<li><strong>Inheritance Hierarchies</strong>: Map class and interface hierarchies</li>
<li><strong>Interface Compliance</strong>: Validate interface implementations</li>
</ul>
<h2 id="analysis-workflow"><a class="header" href="#analysis-workflow">Analysis Workflow</a></h2>
<h3 id="1-ast-preparation"><a class="header" href="#1-ast-preparation">1. AST Preparation</a></h3>
<p>All analysis begins with a parsed AST:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let parser = Parser::new();
let compilation_unit = parser.parse(source_code)?;
<span class="boring">}</span></code></pre></pre>
<h3 id="2-pipeline"><a class="header" href="#2-pipeline">2. Pipeline</a></h3>
<p>Use the framework pipeline with registered passes. Per-file runs populate typed artifacts; a final <code>AnalysisReport</code> summarizes metrics, control flow, and dependencies.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use bsharp_analysis::framework::pipeline::AnalyzerPipeline;
use bsharp_analysis::framework::session::AnalysisSession;
use bsharp_analysis::context::AnalysisContext;
use bsharp_analysis::report::AnalysisReport;
use bsharp_parser::facade::Parser;

let parser = Parser::new();
let (cu, spans) = parser.parse_with_spans(source_code)?;
let ctx = AnalysisContext::new("file.cs", source_code);
let mut session = AnalysisSession::new(ctx, spans);
AnalyzerPipeline::run_with_defaults(&amp;cu, &amp;mut session);
let report: AnalysisReport = AnalysisReport::from_session(&amp;session);
<span class="boring">}</span></code></pre></pre>
<h3 id="3-analysis-execution"><a class="header" href="#3-analysis-execution">3. Analysis Execution</a></h3>
<p>The pipeline runs passes in phases:</p>
<ul>
<li>Index → Metrics (local) → Global (CFG, deps) → Semantic rules → Reporting</li>
</ul>
<p>Artifacts (e.g., <code>AstAnalysis</code>, <code>ControlFlowIndex</code>, <code>DependencyGraph</code>) are inserted into the <code>AnalysisSession</code> and consumed by reporting.</p>
<h3 id="4-results-processing"><a class="header" href="#4-results-processing">4. Results Processing</a></h3>
<p>Analysis results are structured for easy consumption:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Metrics results
println!("Cyclomatic Complexity: {}", metrics.cyclomatic_complexity);
println!("Lines of Code: {}", metrics.lines_of_code);

// Diagnostics
for d in &amp;report.diagnostics.diagnostics {
    println!("{}: {}", d.code, d.message);
}
<span class="boring">}</span></code></pre></pre>
<h2 id="analysis-registry-and-passes"><a class="header" href="#analysis-registry-and-passes">Analysis Registry and Passes</a></h2>
<p>Analyses are implemented as <code>AnalyzerPass</code> implementations registered in an <code>AnalyzerRegistry</code> and executed by the <code>AnalyzerPipeline</code>. Local rulesets and semantic rulesets run alongside passes based on <code>Phase</code>.</p>
<h2 id="configuration-and-customization"><a class="header" href="#configuration-and-customization">Configuration and Customization</a></h2>
<h3 id="analysis-configuration"><a class="header" href="#analysis-configuration">Analysis Configuration</a></h3>
<p>Analyzers can be configured for different scenarios:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let config = AnalysisConfig {
    max_cyclomatic_complexity: 10,
    max_method_length: 50,
    enforce_naming_conventions: true,
    detect_code_smells: true,
    // ... other configuration options
};

let analyzer = MetricsAnalyzer::with_config(config);
<span class="boring">}</span></code></pre></pre>
<h3 id="custom-rules"><a class="header" href="#custom-rules">Custom Rules</a></h3>
<p>Extend analysis with custom rules:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let custom_analyzer = QualityAnalyzer::new()
    .add_rule(CustomRule::new("no-goto-statements"))
    .add_rule(CustomRule::new("max-parameters", 5))
    .add_rule(CustomRule::new("prefer-composition"));
<span class="boring">}</span></code></pre></pre>
<h3 id="reporting-options"><a class="header" href="#reporting-options">Reporting Options</a></h3>
<p>Flexible reporting formats:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// JSON output
let json_report = analyzer.analyze(&amp;ast).to_json();

// XML output
let xml_report = analyzer.analyze(&amp;ast).to_xml();

// Custom format
let custom_report = analyzer.analyze(&amp;ast).format_with(custom_formatter);
<span class="boring">}</span></code></pre></pre>
<h2 id="integration-points"><a class="header" href="#integration-points">Integration Points</a></h2>
<h3 id="cli-integration"><a class="header" href="#cli-integration">CLI Integration</a></h3>
<p>Analysis capabilities are exposed through the <code>analyze</code> command and configured via options (format, config, include/exclude, enable/disable passes and rulesets, severity overrides). See <code>docs/cli/analyze.md</code> for details.</p>
<h3 id="programmatic-usage"><a class="header" href="#programmatic-usage">Programmatic Usage</a></h3>
<p>Direct integration in tools typically runs the pipeline and pulls artifacts from the session:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use bsharp_analysis::context::AnalysisContext;
use bsharp_analysis::framework::{AnalyzerPipeline, AnalysisSession};
use bsharp_analysis::metrics::AstAnalysis;
use bsharp_parser::facade::Parser;

let source = fs::read_to_string(path)?;
let (cu, spans) = Parser::new().parse_with_spans(&amp;source)?;
let mut session = AnalysisSession::new(AnalysisContext::new(path, &amp;source), spans);
AnalyzerPipeline::run_with_defaults(&amp;cu, &amp;mut session);
if let Some(ast) = session.artifacts.get::&lt;AstAnalysis&gt;() {
    println!("methods={} complexity={}", ast.total_methods, ast.cyclomatic_complexity);
}
<span class="boring">}</span></code></pre></pre>
<h2 id="performance-characteristics"><a class="header" href="#performance-characteristics">Performance Characteristics</a></h2>
<h3 id="analysis-performance"><a class="header" href="#analysis-performance">Analysis Performance</a></h3>
<ul>
<li><strong>Incremental Analysis</strong>: Support for analyzing only changed parts</li>
<li><strong>Parallel Processing</strong>: Multi-threaded analysis for large codebases</li>
<li><strong>Memory Efficiency</strong>: Minimal memory overhead during analysis</li>
<li><strong>Caching</strong>: Results caching for repeated analysis</li>
</ul>
<h3 id="scalability"><a class="header" href="#scalability">Scalability</a></h3>
<p>The framework scales from single files to large enterprise codebases:</p>
<ul>
<li>Single file analysis: Sub-second performance</li>
<li>Medium projects (100+ files): Seconds to minutes</li>
<li>Large codebases (1000+ files): Minutes with parallel processing</li>
</ul>
<p>This analysis framework provides the foundation for building sophisticated code quality tools, IDE integrations, and automated code review systems.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../syntax/formatter.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../analysis/pipeline.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../syntax/formatter.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../analysis/pipeline.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
